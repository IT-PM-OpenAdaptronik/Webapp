{% extends "base.html" %}
{% load static %}
{% block siteTitle %}Integrieren &amp; Ableiten{% endblock %}
{% block moreStylesheets %}
{% endblock %}
{% block naviSpace %}
    {% include 'includeDefs/normalNavi.html' %}
{% endblock %}
{% block container %}
<h2>Integrieren &amp; Ableiten</h2>
<div class="row">
    <div class="col s12 m12 l12" style="" id="">
        <div class="card">
            <div class="card-content">
                Hier kannst du Spalten über andere ableiten und integrieren, jeweils über einen "Auftrag".<br/>
                <!--Damit die neu generierten Spalten auch in deinem Experiment gespeichert werden, musst du am Ende auf den Button "Neue Spalten abspeichern" klicken.<br/>-->
                Die neuen Spalten siehst du dann in der Analyse-App.
                <ul class="collection with-header" style="">
                    <li class="collection-item avatar" id="taskFinishedTemplate" style="">
                        <i class="material-icons circle">check</i>
                        <p>
                            <b>Auftrag abgeschlossen:</b>
                            Spalte
                            <span class="firstColInfo">FIRST ("NAME" (EINHEIT))</span>
                            wurde über Spalte
                            <span class="secondColInfo">SECOND ("NAME" (EINHEIT))</span>
                            <span class="intOrDeriv">ABGELEITET/INTEGRIERT</span>.
                            Das Ergebnis ist in Spalte
                            <span class="resultColInfo">RESULT_SPALTE ("NAME" EINHEIT)</span>
                        </p>
                    </li>
                </ul>
                <form method="post" enctype="multipart/form-data" id="newTaskForm"> 
                {% csrf_token %}
                    <div class="" id="newTask">
                        <p><b>Neuer Auftrag:</b><br/>
                        <!--<br/>
                        >>{{ jsonHeader }} <<<br/>
                        >>{{ jsonEinheiten }} <<-->
                        <div class="input-field inline" style="width:0; height:0; font-size:0">
                        </div>Ich möchte
                        <div class="input-field inline">
                            <select class="inline" id="firstCol" style="">
                                {% for header, unit in jsonHeaderAndUnits %}
                                    <option value="{{ forloop.counter0 }}">({{ forloop.counter0 }}) {{ header }} ({{ unit }})</option>
                                {% endfor %}
                            </select> 
                        </div>
                        über
                        <div class="input-field inline" id="secondColInputFieldContainer">
                            <!-- clone w/ javascript -->
                            <select class="inline" id="secondCol">
                            </select>
                        </div>
                        <div class="input-field inline">
                            <select class="inline" id="function">
                                <option value="0">ableiten</option>
                                <option value="1">integrieren</option>
                            </select>
                        </div> !<br/>
                        <div class="input-field inline">
                            <input id="newColName" type="text" class="validate">
                            <label for="newColName">Name der neuen Spalte</label>
                        </div>
                        <div class="input-field inline">
                            <select class="" id='newColUnit'>
                                <optgroup label='Zeit'>
                                    <option value='ms' selected>ms</option>
                                    <option value='sec'>sek</option>
                                    <option value='min'>min</option>
                                    <option value='h'>h</option>
                                </optgroup>
                                <optgroup label='Kraft'>
                                    <option value='N'>N</option>
                                    <option value='kN'>kN</option>
                                </optgroup>
                                <optgroup label='Weg'>
                                    <option value='m'>m</option>
                                    <option value='mm'>mm</option>
                                    <option value='cm'>cm</option>
                                    <option value='µm'>µm</option>
                                </optgroup>
                                <optgroup label='Geschwindigkeit'>
                                    <option value='m/s'>m/s</option>
                                    <option value='km/h'>km/h</option>
                                    <option value='mm/s'>mm/s</option>
                                </optgroup>
                                <optgroup label='Beschleunigung'>
                                    <option value='m/s²'>m/s²</option>
                                    <option value='g'>g</option>
                                    <option value='mm/s²'>mm/s²</option>
                                </optgroup>
                            </select>
                            <label for="newColUnit">Einheit der neuen Spalte</label>
                        </div>&ensp;
                        <button class="btn waves-effect waves-light" type="submit" id="submitButton">ausführen<i class="material-icons right">send</i></button>
                    </p></div>
                    <div class="row valign-wrapper hide" id="newTaskInProgress">
                        <div class="col">
                            <div class="newTaskPreloaderWrapper">
                                <div class="preloader-wrapper small active">
                                    <div class="spinner-layer right">
                                        <div class="circle-clipper left">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="gap-patch">
                                            <div class="circle"></div>
                                        </div>
                                        <div class="circle-clipper right">
                                            <div class="circle"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col valign-wrapper" style="">
                            Dein Auftrag wird gerade ausgeführt.
                        </div>
                    </div>
                </form>
                <!--<form method="post" action="@TODO HIER views.py-Methode zum abspeichern einfügen" enctype="multipart/form-data">
                    <textarea name="newColsAsJson" style="display:none;">
                            
                    </textarea>
                    <button class="btn waves-effect waves-light" type="submit">Neue Spalten abspeichern<i class="material-icons right">send</i></button>
                    <button class="btn waves-effect waves-light" type="submit"><i class="material-icons left">close</i>Abbrechen</button>               
                </form>-->
            </div>
        </div>
    </div>
</div>

<!-- hidden vars for js -->
<input type="hidden" value="{{ experimentId }}" id="experimentId"/>

{% endblock %}










{% block moreScripts %}
<script type="text/javascript" src="{% static 'jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'experiments/deriv.js' %}"></script>
<script>
</script>
{% endblock %}



<form method="post" action="{% url 'experiments:intderivate' %}">
    {% csrf_token %}
    <textarea style="display: none;" id="jsonHeader" name="jsonHeader"></textarea>
    <textarea style="display: none;" id="intderivresult" name="intderivresult"></textarea>
    <textarea style="display: none;" id="jsonEinheiten" name="jsonEinheiten"></textarea>
    <input type="hidden" id="zeitreihenSpalte" name="zeitreihenSpalte"/>
    <textarea style="display: none;" id="jsonData" name="jsonData"></textarea>

    <textarea name="function"></textarea>
    <textarea name="first"></textarea>
    <textarea  name="second"></textarea>

	<input type="submit"/>

</form>